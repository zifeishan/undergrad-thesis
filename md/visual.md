
\chapter{棒球网络可视化系统：MLB illustrator}
\label{sec:vis}

我们搭建了在线可视化系统，将1960年到2011年的数据进行了可视化。
可视化项目包括：队伍的排名、单支队伍中球员的排名、一年中所有球员的排名。
球员排名采用了GameRank方法。

这一可视化工具的作用为：
一、提供了从网络角度分析选手数据的方法，而不是采用传统的数据列表。丰富了竞技比赛数据表现的途径。
二、通过直观地表达球员之间的关系以及GameRank值，有助于进行进一步的比赛分析。

我们可视化系统的网站为： \url{http://mlbillustrator.com/}。\cite{mlbi}

我们网站的开发采用基础的JavaScript和HTML语言，以及如下代码库： D3.js\cite{d3}, jQuery\cite{jquery}。


系统界面描述
====

在我们的可视化系统中，结点代表MLB的球员，结点的大小反应球员的GameRank值，越大的结点GameRank值越大，排名越高。
同种颜色的结点位于相同的队伍中。
黑色边框的结点是投手（有投球能力和打击能力），它们的结点大小代表投手的GameRank值 ($GRPitching$)； 白色边框的结点不是投手（只有打击能力），它们的结点大小代表打击员的GameRank值 ($GRBatting$)。

每条边为一次打击员和投手之间的竞争。
边的颜色为边的种类：蓝色为投球边（投手获胜），橙色为进攻边（打击员获胜）。
两名球员之间的同种边被整合为一条边，边的粗细代表边的权重。

用户在可视化界面中，可以与系统进行多种交互。


系统功能
====

当前的系统提供三种可视化界面：
一、选定队伍中的所有球员：将一年内、一个队伍中所有球员及其对手之间的网络进行可视化。
二、所有球员：将一年内所有球员的网络进行可视化。
三、球队的可视化：将球队与球队之间的网络进行可视化。

在前两种可视化界面中，球员可以使用GameRank值或出度值来排名。
在球队的可视化界面中，球队可以使用PageRank值或出度值（胜场数）进行排名。

在选定功能、年份、球队、排序方法等参数之后，可视化网络将会自动绘制在浏览器窗口上。
网络的布局采用D3内置的力学模型。


\begin{figure*}[!t]
\centering
\subfigure[选定队伍中的所有球员，2009年芝加哥白袜队]{
    \includegraphics[width=0.3\textwidth]{img/vis2.jpg}
    \label{fig:2}
}
\subfigure[所有球员，2005年]{
    \includegraphics[width=0.3\textwidth]{img/vis3.5.jpg}
    \label{fig:3}
}
\subfigure[显示一个结点和他的所有邻居]{
    \includegraphics[width=0.3\textwidth]{img/vis3.jpg}
    \label{fig:4}
}
\caption{系统可视化界面}
\label{fig:vis}
\end{figure*}

在“选定队伍中的所有球员”功能中，用户可以看到谁是队伍中的最有能力核心投手和打击员。图 \ref{fig:2} 展示了芝加哥白袜队在2009年的例子，排名方法为GameRank。
在“所有球员”功能中，用户可以看到一年中的所有球员，并通过交互研究球员之间的关系。图 \ref{fig:3} 展示了2005年所有球员的例子，排名方法为GameRank。
在图 \ref{fig:4} 中展示了一种交互方法：当用户点选一个结点时，会高亮该结点及其邻居。通过连向该结点的边的颜色，我们可以找到哪些球员赢过他，以及他赢过哪些球员。
此外，用户还可以通过搜索姓名，来高亮网络中的任意结点，以及通过鼠标悬停，来查看节点和边的信息。


可视化系统上的分析
====

我们利用可视化系统进行了一些网络分析。
我们利用“所有球员”的可视化网络，如图\ref{fig:3}，发现了一些现象。

首先，网络有两个大的社区组成。根据生成这一布局的力学模型原理可知，每个社区内的边很密集，社区之间的边很稀疏。
这是为什么呢？我们注意到在MLB中有 “美联” (AL) 和“国联” (NL)两个分区，而这两个社区就对应这两个分区。之所以形成社区，是因为统一分区内进行多次比赛， 
而分区之间每年只进行几场分区冠军总决赛。

其次，我们发现两个社区之间有一些结点，到两个社区的边数基本相等，例如图 \ref{fig:4} 中的选定结点。
我们称其为“桥结点”。
我们手动检查了这些结点，发现他们都在一年当中跨分区更换过队伍。例如， Dan Haren 在2010年从 Arizona Diamondbacks (NL) 队转会到了 Anaheim Angels (AL) 队，因此代表他的结点在2010年的网络中成为了一个桥结点。

